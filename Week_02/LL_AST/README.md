# 使用LL算法构建AST

## 正则表达式

来源[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)

语法 `var re = /pattern/flags;`

1. pattern：老师用`()`来**抓取分组**， 每个分组内，用`[]`**抓取特定字符**

2. flag： 老师用`g`来做全局搜索, 找到所有满足条件的结果（`exec()`作用在这个标志下，生成一个迭代器，并且返回`next()`的结果）

个人备注：`/\[.*?\]/g` vs `/\[.*\]/g`
* ? 加在**贪婪**的`*`(0 or more), `+`(1 or more), `?` (0 or 1), `{}` (自定义区间)后， 取消贪婪

例子： `[He] ha[s] to go read this novel [Alice in Wonderland].``

* with `?`: Array ["[He]", "[s]", "[Alice in Wonderland]"]

* without `?`: Array ["[He] ha[s] to go read this novel [Alice in Wonderland]"

## 词法分析

学习了四则运算的词法分析。 四则运算包含2个部分， `数字`和`运算符`。

首先，我们通过正则表达式抓取这两部分，并将其存入一个数组。最后，再插入终止符`EOF`。

第二步， 分析词法。四则运算可通过`乘法运算`和`加法运算`来实现。

乘法运算分3种情况：

* 单个数字： 返回仅含有该数字的乘法表达式 (保证最后返回值永远是乘法表达式)

* 乘法表达式 + 操作符：返回含有**该乘法表达式**，**操作符**， **后一项数字**组成的乘法表达式

* 单个乘法表达式： 分析结束（没有后续操作），返回整个表达式

可以看出，`乘法表达式`由`数字`构成。

同样， 加法表达式也分3部分，结构也一样，唯一区别是：`加法表达式`由`乘法表达式`构成。

### 学习要点： 递归思想

分析词法时， 我们**从大到小**去分析：表达式是由加法表达式构成， 加法由乘法构成，乘法由数字构成。将复杂大问题拆解到简单小问题。

从而， 在实现时，**从小到大**解决问题。

编写递归，就是分析的过程。 先写需要解决的最大的问题是什么，再写子问题是什么。

计算机运行递归，就是实现的过程。先解决栈顶的最小子问题，再解决之后的大问题。

通过这次学习，复习了递归的思想。

## 细节

### var vs let

* `var` 没有**块级作用域**，它们的最小作用域就是函数级作用域。`let`有
* `var` 变量声明在函数开头就会被处理（脚本启动对应全局变量）。`let`不行

最好使用`let`